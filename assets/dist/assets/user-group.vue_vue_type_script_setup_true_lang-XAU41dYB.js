import{$ as E,k as L,o as j,v as D,L as I,e as R,f as S}from"./vue-bootstrap-DqOMAocd.js";import{d as h}from"./vesp-CfCBeugN.js";import{d as z,A as g,z as A,B as G,o as s,c as m,q as r,w as n,u as e,b as p,e as k,f as _,h as d,X as H,i as v,ab as O,m as P,j as X,F as J,p as K}from"./vue-COS8aM9k.js";import{E as Q}from"./api-CePO7U0J.js";const W={disabled:"",value:""},Y={key:1,class:"d-flex flex-wrap my-2 gap-1"},ae=z({__name:"user-group",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(b,{emit:y}){const w=b,x=y,o=g({get(){return w.modelValue},set(a){x("update:modelValue",a)}}),i=A([]),f=g(()=>i.value.filter(a=>!o.value.aw_contexts.includes(a.value)));return G(async()=>{try{(await Q("mgr/contexts",{combo:!0,sort:"rank"})).rows.forEach(t=>{t.key!=="mgr"&&(i.value.push({text:t.name,value:t.key}),o.value.aw_contexts.push(t.key))})}catch{}}),(a,t)=>{const V=E,u=L,B=j,$=h,F=D,C=I,U=R,T=S;return s(),m("div",null,[r(u,{label:a.$t("models.user_group.name")},{default:n(()=>[r(V,{modelValue:e(o).name,"onUpdate:modelValue":t[0]||(t[0]=l=>e(o).name=l),required:""},null,8,["modelValue"])]),_:1},8,["label"]),r(u,{label:a.$t("models.user_group.description")},{default:n(()=>[r(B,{modelValue:e(o).description,"onUpdate:modelValue":t[1]||(t[1]=l=>e(o).description=l),rows:"3"},null,8,["modelValue"])]),_:1},8,["label"]),r(u,{label:a.$t("models.user_group.parent.name")},{default:n(()=>[r($,{modelValue:e(o).parent,"onUpdate:modelValue":t[2]||(t[2]=l=>e(o).parent=l),url:"mgr/user-groups","text-field":"name",sort:"name","filter-props":{exclude:e(o).id}},null,8,["modelValue","filter-props"])]),_:1},8,["label"]),r(u,{label:a.$t("models.user_group.rank")},{default:n(()=>[r(V,{modelValue:e(o).rank,"onUpdate:modelValue":t[3]||(t[3]=l=>e(o).rank=l),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},8,["label"]),e(o).id?d("",!0):(s(),p(u,{key:0},{default:n(()=>[r(F,{modelValue:e(o).aw_parallel,"onUpdate:modelValue":t[4]||(t[4]=l=>e(o).aw_parallel=l)},{default:n(()=>[k(_(a.$t("models.user_group.resource_group.create")),1)]),_:1},8,["modelValue"])]),_:1})),e(o).aw_parallel?(s(),p(u,{key:1,description:a.$t("models.user_group.resource_group.desc")},{default:n(()=>[H(v("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>e(o).aw_contexts=l),style:{display:"none"},required:""},null,512),[[O,e(o).aw_contexts]]),e(i).length?(s(),p(T,{key:0,modelValue:e(o).aw_contexts,"onUpdate:modelValue":t[6]||(t[6]=l=>e(o).aw_contexts=l),"add-on-change":"","no-outer-focus":""},{default:n(({tags:l,inputAttrs:q,inputHandlers:M,removeTag:N})=>[e(f).length>0?(s(),p(C,P({key:0},q,{options:e(f)},X(M)),{first:n(()=>[v("option",W,_(a.$t("models.user_group.resource_group.select")),1)]),_:2},1040,["options"])):d("",!0),l.length>0?(s(),m("div",Y,[(s(!0),m(J,null,K(l,c=>(s(),m("div",{key:c},[r(U,{variant:"info",onRemove:Z=>N(c)},{default:n(()=>[k(_(c),1)]),_:2},1032,["onRemove"])]))),128))])):d("",!0)]),_:1},8,["modelValue"])):d("",!0)]),_:1},8,["description"])):d("",!0)])}}});export{ae as _};
